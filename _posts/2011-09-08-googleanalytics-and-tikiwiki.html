---
layout: post
title: GoogleAnalytics and TikiWiki
tags:
- CMS
- Google Analytics
- Technology
- TikiWiki
- Webmaster
status: publish
type: post
published: true
meta:
  _edit_last: '1'
  dsq_thread_id: '1100962306'
---
Sat down this morning to integrate Google Analytics into a couple TikiWiki CMS based sites.  Went down easily for the WPress based ones... Tikis took a little (very little) research.

Here's the trick, as found on TikiWiki's documentation. (The option of including it in the Javascript field or in standard location worked well in TikiWiki 7.0.)

Their first option of including it within literal tags and using the GoogleAnalytics Plugin didn't work on my older TikiWiki (~6.1).  Used the second answer and it worked perfectly.  Place the following code in the Look &amp; Feel tab under "Custom End of Code":

____STARTCODE_____

<span class="Apple-style-span" style="color: #666666; font-family: monospace; line-height: normal;"><span class="js-punctuation" style="color: #666666;">{</span><span class="js-keyword" style="color: #770088;">if </span><span class="js-variable" style="color: black;">$tiki_p_admin </span><span class="js-variable" style="color: black;">ne </span><span class="js-string" style="color: #aa2222;">'y'</span><span class="js-punctuation" style="color: #666666;">}</span><span class="js-punctuation" style="color: #666666;">{</span><span class="js-variable" style="color: black;">literal</span><span class="js-punctuation" style="color: #666666;">}</span><span class="js-operator" style="color: #666666;">&lt;</span><span class="js-variable" style="color: black;">script</span><span class="js-variable" style="color: black;">type</span><span class="js-operator" style="color: #666666;">=</span><span class="js-string" style="color: #aa2222;">"text/javascript"</span><span class="js-operator" style="color: #666666;">&gt;</span></span>

<span class="Apple-style-span" style="color: #666666; font-family: monospace; line-height: normal;">
<span class="whitespace">  </span><span class="js-keyword" style="color: #770088;">var </span><span class="js-variable" style="color: black;">_gaq </span><span class="js-operator" style="color: #666666;">= </span><span class="js-variable" style="color: black;">_gaq </span><span class="js-operator" style="color: #666666;">|| </span><span class="js-punctuation" style="color: #666666;">[</span><span class="js-punctuation" style="color: #666666;">]</span><span class="js-punctuation" style="color: #666666;">;</span>
<span class="whitespace">  </span><span class="js-variable" style="color: black;">_gaq</span><span class="js-punctuation" style="color: #666666;">.</span><span class="js-property" style="color: black;">push</span><span class="js-punctuation" style="color: #666666;">(</span><span class="js-punctuation" style="color: #666666;">[</span><span class="js-string" style="color: #aa2222;">'_setAccount'</span><span class="js-punctuation" style="color: #666666;">, </span><span class="js-string" style="color: #aa2222;">'UA-XXXXXXXX-1'</span><span class="js-punctuation" style="color: #666666;">]</span><span class="js-punctuation" style="color: #666666;">)</span><span class="js-punctuation" style="color: #666666;">;</span>
<span class="whitespace">  </span><span class="js-variable" style="color: black;">_gaq</span><span class="js-punctuation" style="color: #666666;">.</span><span class="js-property" style="color: black;">push</span><span class="js-punctuation" style="color: #666666;">(</span><span class="js-punctuation" style="color: #666666;">[</span><span class="js-string" style="color: #aa2222;">'_trackPageview'</span><span class="js-punctuation" style="color: #666666;">]</span><span class="js-punctuation" style="color: #666666;">)</span><span class="js-punctuation" style="color: #666666;">;</span></span>

<span class="whitespace">  </span><span class="js-punctuation" style="color: #666666;">(</span><span class="js-keyword" style="color: #770088;">function</span><span class="js-punctuation" style="color: #666666;">(</span><span class="js-punctuation" style="color: #666666;">) </span><span class="js-punctuation" style="color: #666666;">{</span>
<span class="whitespace">    </span><span class="js-keyword" style="color: #770088;">var </span><span class="js-variabledef" style="color: #0000ff;">ga </span><span class="js-operator" style="color: #666666;">= </span><span class="js-variable" style="color: black;">document</span><span class="js-punctuation" style="color: #666666;">.</span><span class="js-property" style="color: black;">createElement</span><span class="js-punctuation" style="color: #666666;">(</span><span class="js-string" style="color: #aa2222;">'script'</span><span class="js-punctuation" style="color: #666666;">)</span><span class="js-punctuation" style="color: #666666;">; </span><span class="js-localvariable" style="color: #004499;">ga</span><span class="js-punctuation" style="color: #666666;">.</span><span class="js-property" style="color: black;">type </span><span class="js-operator" style="color: #666666;">=</span><span class="js-string" style="color: #aa2222;">'text/javascript'</span><span class="js-punctuation" style="color: #666666;">; </span><span class="js-localvariable" style="color: #004499;">ga</span><span class="js-punctuation" style="color: #666666;">.</span><span class="js-property" style="color: black;">async </span><span class="js-operator" style="color: #666666;">= </span><span class="js-atom" style="color: #228811;">true</span><span class="js-punctuation" style="color: #666666;">;</span>
<span class="whitespace">    </span><span class="js-localvariable" style="color: #004499;">ga</span><span class="js-punctuation" style="color: #666666;">.</span><span class="js-property" style="color: black;">src </span><span class="js-operator" style="color: #666666;">= </span><span class="js-punctuation" style="color: #666666;">(</span><span class="js-string" style="color: #aa2222;">'https:' </span><span class="js-operator" style="color: #666666;">== </span><span class="js-variable" style="color: black;">document</span><span class="js-punctuation" style="color: #666666;">.</span><span class="js-property" style="color: black;">location</span><span class="js-punctuation" style="color: #666666;">.</span><span class="js-property" style="color: black;">protocol </span><span class="js-operator" style="color: #666666;">?</span><span class="js-string" style="color: #aa2222;">'https://ssl' </span><span class="js-punctuation" style="color: #666666;">: </span><span class="js-string" style="color: #aa2222;">'http://www'</span><span class="js-punctuation" style="color: #666666;">) </span><span class="js-operator" style="color: #666666;">+ </span><span class="js-string" style="color: #aa2222;">'.google-analytics.com/ga.js'</span><span class="js-punctuation" style="color: #666666;">;</span>
<span class="whitespace">    </span><span class="js-keyword" style="color: #770088;">var </span><span class="js-variabledef" style="color: #0000ff;">s </span><span class="js-operator" style="color: #666666;">= </span><span class="js-variable" style="color: black;">document</span><span class="js-punctuation" style="color: #666666;">.</span><span class="js-property" style="color: black;">getElementsByTagName</span><span class="js-punctuation" style="color: #666666;">(</span><span class="js-string" style="color: #aa2222;">'script'</span><span class="js-punctuation" style="color: #666666;">)</span><span class="js-punctuation" style="color: #666666;">[</span><span class="js-atom" style="color: #228811;">0</span><span class="js-punctuation" style="color: #666666;">]</span><span class="js-punctuation" style="color: #666666;">;</span><span class="js-localvariable" style="color: #004499;">s</span><span class="js-punctuation" style="color: #666666;">.</span><span class="js-property" style="color: black;">parentNode</span><span class="js-punctuation" style="color: #666666;">.</span><span class="js-property" style="color: black;">insertBefore</span><span class="js-punctuation" style="color: #666666;">(</span><span class="js-localvariable" style="color: #004499;">ga</span><span class="js-punctuation" style="color: #666666;">, </span><span class="js-localvariable" style="color: #004499;">s</span><span class="js-punctuation" style="color: #666666;">)</span><span class="js-punctuation" style="color: #666666;">;</span>
<span class="whitespace">  </span><span class="js-punctuation" style="color: #666666;">}</span><span class="js-punctuation" style="color: #666666;">)</span><span class="js-punctuation" style="color: #666666;">(</span><span class="js-punctuation" style="color: #666666;">)</span><span class="js-punctuation" style="color: #666666;">;</span>

<span class="js-operator" style="color: #666666;">&lt;</span><span class="js-string" style="color: #aa2222;">/script&gt;{/</span><span class="js-variable" style="color: black;">literal</span><span class="js-punctuation" style="color: #666666;">}</span>
<span class="js-punctuation" style="color: #666666;">{</span><span class="js-keyword" style="color: #770088;">else</span><span class="js-punctuation" style="color: #666666;">}</span>
<span class="js-punctuation" style="color: #666666;">{</span><span class="js-variable" style="color: black;">literal</span><span class="js-punctuation" style="color: #666666;">}</span><span class="js-operator" style="color: #666666;">&lt;</span><span class="js-variable" style="color: black;">script </span><span class="js-variable" style="color: black;">type</span><span class="js-operator" style="color: #666666;">=</span><span class="js-string" style="color: #aa2222;">"text/javascript"</span><span class="js-operator" style="color: #666666;">&gt;</span>

<span class="whitespace">  </span><span class="js-keyword" style="color: #770088;">var </span><span class="js-variable" style="color: black;">_gaq </span><span class="js-operator" style="color: #666666;">= </span><span class="js-variable" style="color: black;">_gaq </span><span class="js-operator" style="color: #666666;">|| </span><span class="js-punctuation" style="color: #666666;">[</span><span class="js-punctuation" style="color: #666666;">]</span><span class="js-punctuation" style="color: #666666;">;</span>
<span class="whitespace">  </span><span class="js-variable" style="color: black;">_gaq</span><span class="js-punctuation" style="color: #666666;">.</span><span class="js-property" style="color: black;">push</span><span class="js-punctuation" style="color: #666666;">(</span><span class="js-punctuation" style="color: #666666;">[</span><span class="js-string" style="color: #aa2222;">'_setAccount'</span><span class="js-punctuation" style="color: #666666;">, </span><span class="js-string" style="color: #aa2222;">'UA-XXXXXXXX-1'</span><span class="js-punctuation" style="color: #666666;">]</span><span class="js-punctuation" style="color: #666666;">)</span><span class="js-punctuation" style="color: #666666;">;</span>
<span class="whitespace">  </span><span class="js-variable" style="color: black;">_gaq</span><span class="js-punctuation" style="color: #666666;">.</span><span class="js-property" style="color: black;">push</span><span class="js-punctuation" style="color: #666666;">(</span><span class="js-punctuation" style="color: #666666;">[</span><span class="js-string" style="color: #aa2222;">'_trackPageview'</span><span class="js-punctuation" style="color: #666666;">]</span><span class="js-punctuation" style="color: #666666;">)</span><span class="js-punctuation" style="color: #666666;">;</span>
<span class="whitespace">  </span><span class="js-variable" style="color: black;">_gaq</span><span class="js-punctuation" style="color: #666666;">.</span><span class="js-property" style="color: black;">push</span><span class="js-punctuation" style="color: #666666;">(</span><span class="js-punctuation" style="color: #666666;">[</span><span class="js-string" style="color: #aa2222;">'_setVar'</span><span class="js-punctuation" style="color: #666666;">, </span><span class="js-string" style="color: #aa2222;">'ga_exclude'</span><span class="js-punctuation" style="color: #666666;">]</span><span class="js-punctuation" style="color: #666666;">)</span><span class="js-punctuation" style="color: #666666;">; </span>
<span class="whitespace">  </span><span class="js-punctuation" style="color: #666666;">(</span><span class="js-keyword" style="color: #770088;">function</span><span class="js-punctuation" style="color: #666666;">(</span><span class="js-punctuation" style="color: #666666;">) </span><span class="js-punctuation" style="color: #666666;">{</span>
<span class="whitespace">    </span><span class="js-keyword" style="color: #770088;">var </span><span class="js-variabledef" style="color: #0000ff;">ga </span><span class="js-operator" style="color: #666666;">= </span><span class="js-variable" style="color: black;">document</span><span class="js-punctuation" style="color: #666666;">.</span><span class="js-property" style="color: black;">createElement</span><span class="js-punctuation" style="color: #666666;">(</span><span class="js-string" style="color: #aa2222;">'script'</span><span class="js-punctuation" style="color: #666666;">)</span><span class="js-punctuation" style="color: #666666;">; </span><span class="js-localvariable" style="color: #004499;">ga</span><span class="js-punctuation" style="color: #666666;">.</span><span class="js-property" style="color: black;">type </span><span class="js-operator" style="color: #666666;">=</span><span class="js-string" style="color: #aa2222;">'text/javascript'</span><span class="js-punctuation" style="color: #666666;">; </span><span class="js-localvariable" style="color: #004499;">ga</span><span class="js-punctuation" style="color: #666666;">.</span><span class="js-property" style="color: black;">async </span><span class="js-operator" style="color: #666666;">= </span><span class="js-atom" style="color: #228811;">true</span><span class="js-punctuation" style="color: #666666;">;</span>
<span class="whitespace">    </span><span class="js-localvariable" style="color: #004499;">ga</span><span class="js-punctuation" style="color: #666666;">.</span><span class="js-property" style="color: black;">src </span><span class="js-operator" style="color: #666666;">= </span><span class="js-punctuation" style="color: #666666;">(</span><span class="js-string" style="color: #aa2222;">'https:' </span><span class="js-operator" style="color: #666666;">== </span><span class="js-variable" style="color: black;">document</span><span class="js-punctuation" style="color: #666666;">.</span><span class="js-property" style="color: black;">location</span><span class="js-punctuation" style="color: #666666;">.</span><span class="js-property" style="color: black;">protocol </span><span class="js-operator" style="color: #666666;">?</span><span class="js-string" style="color: #aa2222;">'https://ssl' </span><span class="js-punctuation" style="color: #666666;">: </span><span class="js-string" style="color: #aa2222;">'http://www'</span><span class="js-punctuation" style="color: #666666;">) </span><span class="js-operator" style="color: #666666;">+ </span><span class="js-string" style="color: #aa2222;">'.google-analytics.com/ga.js'</span><span class="js-punctuation" style="color: #666666;">;</span>
<span class="whitespace">    </span><span class="js-keyword" style="color: #770088;">var </span><span class="js-variabledef" style="color: #0000ff;">s </span><span class="js-operator" style="color: #666666;">= </span><span class="js-variable" style="color: black;">document</span><span class="js-punctuation" style="color: #666666;">.</span><span class="js-property" style="color: black;">getElementsByTagName</span><span class="js-punctuation" style="color: #666666;">(</span><span class="js-string" style="color: #aa2222;">'script'</span><span class="js-punctuation" style="color: #666666;">)</span><span class="js-punctuation" style="color: #666666;">[</span><span class="js-atom" style="color: #228811;">0</span><span class="js-punctuation" style="color: #666666;">]</span><span class="js-punctuation" style="color: #666666;">;</span><span class="js-localvariable" style="color: #004499;">s</span><span class="js-punctuation" style="color: #666666;">.</span><span class="js-property" style="color: black;">parentNode</span><span class="js-punctuation" style="color: #666666;">.</span><span class="js-property" style="color: black;">insertBefore</span><span class="js-punctuation" style="color: #666666;">(</span><span class="js-localvariable" style="color: #004499;">ga</span><span class="js-punctuation" style="color: #666666;">, </span><span class="js-localvariable" style="color: #004499;">s</span><span class="js-punctuation" style="color: #666666;">)</span><span class="js-punctuation" style="color: #666666;">;</span>

<span class="whitespace">  </span><span class="js-punctuation" style="color: #666666;">}</span><span class="js-punctuation" style="color: #666666;">)</span><span class="js-punctuation" style="color: #666666;">(</span><span class="js-punctuation" style="color: #666666;">)</span><span class="js-punctuation" style="color: #666666;">;</span>

<span class="js-operator" style="color: #666666;">&lt;</span><span class="js-string" style="color: #aa2222;">/script&gt;{/</span><span class="js-variable" style="color: black;">literal</span><span class="js-punctuation" style="color: #666666;">}</span><span class="js-punctuation" style="color: #666666;">{</span><span class="js-string" style="color: #aa2222;">/if}</span>

&nbsp;

___END_CODE__

Thanks for the clear documentation <a title="doc.tiki.org" href="http://doc.tiki.org" target="_blank">doc.tiki.org</a> and give the CMS a try. It's a nicely integrated CMS w/ wiki, blog, forums, etc.

Source: <a href="http://doc.tiki.org/PluginGoogleAnalytics">PluginGoogleAnalytics | Documentation for Tiki Wiki CMS Groupware</a>.
