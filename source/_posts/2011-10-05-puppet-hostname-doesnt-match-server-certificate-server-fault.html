---
layout: post
title: Uggh - "Puppet hostname doesnt match server certificate"
tags:
- Debian
- LINUX
- Puppet
- Ruby
- Technology
status: publish
type: post
published: true
meta:
  _edit_last: '1'
  dsq_thread_id: '1063267845'
:alias: /2011/10/puppet-hostname-doesnt-match-server-certificate-server-fault/
---
Wow, this one stumped me for the better part of 12 hrs...

So Puppet (the Ruby Gem) uses SSL certificates to authenticate to the Puppet Master.  I kept receiving the warning listed in the title of this post no matter how I altered my configs.

Here's the short version:

Determine what Fully Qualified Domain Name is being used by the PuppetMaster to created the signing cert.  On my virtual platform this ended up being the hostname

Add that hostname/FQDN and it's IP address to your PuppetClient's /etc/hosts like so:

[cce_bash]173.999.999.999    hostname[/cce_bash]

Now start up the PuppetMaster Server with the following command [cce_bash]# puppetmasterd --verbose --no-daemonize[/cce_bash]

Now invoke the puppet client like so: [cce_bash]puppet agent --no-daemonize --verbose --server=HostnameOfServer[/cce_bash]

Finally, now that we know it's working well edit the /etc/puppet/puppet.conf on Puppet Client so that you have a server entry in the [main] section:

[cce_bash][main]

server=HostnameOfServer [/cce_bash]

Tada!

&nbsp;

Source of partial answer: <a href="http://serverfault.com/questions/197074/puppet-hostname-doesnt-match-server-certificate">Puppet hostname doesnt match server certificate - Server Fault</a>.
